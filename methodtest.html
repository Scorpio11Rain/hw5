<!DOCTYPE html>
<html>
<head>
	<title>methodtest</title>
</head>
<body>
	<h1>Method Test</h1>
	<form>
		<label for="id">ID:</label>
		<input type="number" id="id" name="id">
        <br>
        <label for="article_name">Article Name:</label>
        <input type="text" id="article_name" name="article_name">
        <br>
        <label for="article_body">Article Body:</label>
        <textarea id="article_body" name="article_body"></textarea>
        <br>
        <p id ="date"></p>
        <hr>
        <button type="button" onclick="post()">postBTN</button>
        <button type="button" onclick="get()">getBTN</button>
        <button type="button" onclick="put()">putBTN</button>
        <button type="button" onclick="deletefunc()">deleteBTN</button>
    </form>
    <output id="response"></output>

	<script type="text/javascript">
        const date = new Date();
        document.getElementById('date').innerHTML = date;
        let id = document.getElementById("id").value;
        let article_name = document.getElementById("article_name").value;
        let article_body = document.getElementById("article_body").value;
        var entered_data = JSON.stringify({"id": id, "article_name": article_name, 
        "article_body": article_body, "date": date});

        function renderHTML(data){
            html = '';
            if (typeof(data) == 'object'){
                html += '<ul>';
                for (var d in data){
                    html += '<li>' + d + ':' + renderHTML(data[d]) + '</li>';
                }
                html += '</ul>';
            }
            else{
                html += data;
            }
            return html;
        }

        function post() {
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "https://httpbin.org/post");
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var response = JSON.parse(xhr.responseText);
                    document.getElementById("response").innerHTML = renderHTML(response);  
                }
            }
            xhr.send(entered_data);
        }
    
        function get() {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "https://httpbin.org/get");
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4 && xhr.status === 200) {
                    var response = JSON.parse(xhr.responseText);
                    document.getElementById("response").innerHTML = renderHTML(response);
                }
            }
            xhr.send();
        }
    
        function put() {
            var xhr = new XMLHttpRequest();
            xhr.open("PUT", "https://httpbin.org/put");
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var response = JSON.parse(xhr.responseText);
                    document.getElementById("response").innerHTML = renderHTML(response);  
                }
            }
            xhr.send(entered_data);
        }
    
        function deletefunc() {
            var xhr = new XMLHttpRequest();
            xhr.open("DELETE", "https://httpbin.org/delete");
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4 && xhr.status === 200) {
                    var response = JSON.parse(xhr.responseText);
                    document.getElementById("response").innerHTML = renderHTML(response);
                }
            }
            xhr.send();
        }
    </script>
</body>
</html>    
    
